–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `SeatMap` –≤ React –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ –∏ –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî –æ—Ç –µ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ `SeatMap` **–Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**:

---

### üü¢ **1. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`mount`)**

–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `SeatMap` –≤–ø–µ—Ä–≤—ã–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:

#### 1.1 –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—ã–∑–æ–≤ –≤—Å–µ—Ö **—Ö—É–∫–æ–≤** (–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ):

* `usePopup()` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
* `useConfig()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
* `useState()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è: `seats`, `loading`, `error`.
* `useRef()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `fetched` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è, –±—ã–ª –ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–µ—Ä–≤–∏—á–Ω—ã–π fetch.
* `useCallback()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `fetchSeats` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Å—Ç.
* `useCallback()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π WebSocket.
* `useWebSocket(...)` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket —Å –ø–æ–¥–ø–∏—Å–∫–æ–π –Ω–∞ –∫–∞–Ω–∞–ª.

#### 1.2 –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `useEffect(...)`

* –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config`), –∏ `fetched.current === false`, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

    * –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `fetched.current = true`.
    * –í—ã–∑–æ–≤ `fetchSeats()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è HTTP-–∑–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –≤—Å–µ—Ö –º–µ—Å—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –∏ –ø–ª–æ—â–∞–¥–∫–∏.

---

### üü† **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`update`)**

#### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

* –ü–æ–ª—É—á–µ–Ω—ã –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`config`).
* –ó–∞–≥—Ä—É–∂–µ–Ω—ã –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ –º–µ—Å—Ç–∞—Ö (`seats`).
* –ü—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ WebSocket (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–µ—Å—Ç–∞).
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞/–æ—Ç–º–µ–Ω—ã –º–µ—Å—Ç–∞.

#### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö:

* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è.
* –ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –º–µ—Å—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ `guestId`.

---

### üî¥ **3. –†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`unmount`)**

#### –ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

* –•—É–∫ `useWebSocket(...)` –¥–æ–ª–∂–µ–Ω **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç WebSocket**-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤–Ω—É—Ç—Ä–∏ `useWebSocket`).
* React –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

---

### üìä –°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

| –°–æ–±—ã—Ç–∏–µ                            | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç                                            |
| ---------------------------------- | --------------------------------------------------------- |
| –ò–∑–º–µ–Ω–∏–ª—Å—è `config`                 | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `fetched.current` ‚Üí –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–µ—Å—Ç–∞         |
| –ü—Ä–∏—à–µ–ª WebSocket-—Å–æ–æ–±—â–µ–Ω–∏–µ         | –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –º–µ—Å—Ç–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏             |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ—Å—Ç–∞ | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏–ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É –º–µ—Å—Ç–∞ |
| WebSocket –æ—Ç–∫–ª—é—á–∏–ª—Å—è               | –í—Å–µ –∫–Ω–æ–ø–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è       |

---

–•–æ—á–µ—à—å, –º–æ–≥—É –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –≤ –≤–∏–¥–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, flowchart).
